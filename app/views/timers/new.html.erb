
<div class='title-contents'>
  タイマー
</div>

    <%= link_to 'キャンセル', root_path , class:"link-btn"%>

  <%#= form_with model: @timer, url:timer_path, method: 'post' , local: true do |f| %>
  <div class='store-btn'>
      <button type="submit" id="start">タイマー開始</button>
      <button type="submit" id="stop">停止 </button>
      <button type="submit" id="delete">削除 </button>

      <p>経過時間<p>

      <div class='timer'>
        <div id="hour"></div>
        <div id="minute"></div>
        <div id="second"></div>
      </div>
    
  </div>
  <%# end %>


<script>

  var testTimer;
  let second = 0;
  let minute = 0;
  let hour = 0;


  function startTimer(){

    testTimer=setInterval(function(){

      second++;
      document.getElementById('second').innerHTML = second + '秒';
      document.getElementById('minute').innerHTML = minute + '分';      
      document.getElementById('hour').innerHTML = hour + '時間';      


      if (second == 4) {

        minute = minute + 1;
        document.getElementById('second').innerHTML = 0 + '秒';
        document.getElementById('minute').innerHTML = minute + '分';
        second = 0;

      }

      if (minute == 4) {
 
        hour = hour + 1;
        document.getElementById('second').innerHTML = 0 + '秒';      
        document.getElementById('minute').innerHTML = 0 + '分';
        document.getElementById('hour').innerHTML = hour + '時間';
        minute = 0;
        second = 0;

      }

    } , 1000);

  }

  function stopTimer(){
    clearInterval(testTimer);
  }

  function deleteTimer(){
    second = 0;
    minute = 0;
    hour = 0;
    document.getElementById('second').innerHTML = 0 + '秒';      
    document.getElementById('minute').innerHTML = 0 + '分';      
    document.getElementById('hour').innerHTML = 0 + '時間';      
  }

  document.getElementById("start").onclick = () => {
    startTimer();
  }

  document.getElementById("stop").onclick = () => {
    stopTimer();
  }

  document.getElementById("delete").onclick = () => {
    deleteTimer();
    stopTimer();
  }


</script>